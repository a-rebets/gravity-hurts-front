@import (reference) './custom-theme.less';

@loader-size: 50px;
@gradient-accent: rgba(209, 213, 219, 0.85);

html,
body {
	@apply fixed;
}

.wrapper {
	@apply h-full relative;
}

.water-layer {
	@apply h-full bg-cover;
}

.rs-carousel {
	@apply h-full;

	.rs-carousel-slider-item {
		@apply w-1/2;
	}

	&.story-open .rs-carousel-content {
		@apply z-10;
	}
}

.rs-drawer-left.rs-drawer-xs {
	@apply w-3/4;

	.rs-drawer-title {
		@apply text-xl font-medium;
	}

	.rs-drawer-header-close {
		@apply top-auto bottom-0;
	}
}

.greeting {
	background: linear-gradient(
		to right,
		#fff 25%,
		@gradient-accent 40%,
		@gradient-accent 60%,
		#fff 75%
	);
	@apply select-none inline-block bg-clip-text text-black;
	background-size: 200% auto;
	-webkit-text-fill-color: transparent;
	animation: shine 3s linear infinite;

	@keyframes shine {
		to {
			background-position: 200% center;
		}
	}
}

.toolbar {
	@apply bg-white py-5 backdrop-filter backdrop-blur-sm;
	--tw-bg-opacity: 0.25;
}

.sound-wave {
	@apply w-11 h-6 flex justify-around items-center;

	.bar {
		@apply block w-1 rounded-xl h-6;
		margin-right: 1px;
		background: @base-color;
		animation: sound 0ms -780ms linear infinite alternate;
		transition: height 1s;

		.generate-bars(5);

		.generate-bars(@n, @i: 1) when (@i =< @n) {
			&:nth-child(@{i}) {
				height: @i * 2px;
				animation-duration: (560ms + @i * 20ms);
			}
			.generate-bars(@n, (@i + 1));
		}
	}

	@keyframes sound {
		0% {
			@apply h-1 opacity-40;
		}
		100% {
			@apply h-6 opacity-100;
		}
	}
}

.story-modal {
	visibility: hidden;
	clip-path: circle(1rem at 50% 92%);
	transition: clip-path 0.6s cubic-bezier(0.4, 0, 0.2, 1) 100ms;

	&.open {
		visibility: visible;
		clip-path: circle(75%);
	}
}

.player-modal {
	width: 95%;

	.loader .rs-placeholder-paragraph-rows {
		@apply py-6 flex flex-col items-center;
	}
}

#circle {
	@apply z-30 rounded-full relative bg-white transition-transform transform-gpu delay-500;

	.rs-btn-icon {
		@apply w-20 h-20 p-3 shadow-lg;

		.rs-icon {
			@apply w-20 h-20 text-4xl py-3;
			line-height: 3.2rem;
		}
	}

	.story-open & {
		@apply scale-0;
	}
}

/* Loading Icon */
.loading {
	width: @loader-size;
	height: @loader-size;
	margin: 0 auto;

	&__ring {
		position: absolute;
		width: @loader-size;
		height: @loader-size;

		&:first-child {
			transform: skew(30deg, 20deg);
		}

		&:last-child {
			transform: skew(-30deg, -20deg) scale(-1, 1);

			svg {
				animation-delay: -0.5s;
			}
		}

		svg {
			animation: rotate 1s linear infinite;
			fill: rgba(255, 255, 255, 0.7);
		}
	}

	@keyframes rotate {
		to {
			transform: rotate(360deg);
		}
	}
}

.countdown {
	@apply pl-14 pr-10 select-none;

	.rs-row {
		@apply mb-4;
	}

	.rs-flex-box-grid .rs-flex-box-grid-item {
		p {
			@apply italic font-light;
			font-family: 'Bitter', serif;
		}

		&:first-child p {
			@apply text-6xl text-right pr-2;
		}
		&:last-child p {
			@apply text-4xl pl-2 leading-snug;
		}
	}
}

.progress {
	@apply w-full h-4 bg-gray-300 rounded-2xl overflow-hidden;

	.progress-bar {
		@apply block h-full;
		box-shadow: 5px 0 15px 0 rgba(0, 0, 0, 0.9);
		background: linear-gradient(
			90deg,
			#ffd33d,
			#ea4aaa 17%,
			#b34bff 34%,
			#01feff 51%,
			#ffd33d 68%,
			#ea4aaa 85%,
			#b34bff
		);
		background-size: 300% 100%;
		animation: progress-animation 2s linear infinite;
	}

	@keyframes progress-animation {
		0% {
			background-position: 100%;
		}
		100% {
			background-position: 0;
		}
	}
}
